<!DOCTYPE html>
<html lang="es">
<head>
          <title>BSDguy.org - Agregando un disco extra en NetBSD</title>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />




    <meta name="tags" content="scsi" />
    <meta name="tags" content="netbsd" />
    <meta name="tags" content="unix" />
    <meta name="tags" content="bsd" />
    <meta name="tags" content="linux" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="./">BSDguy.org</a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li class="active"><a href="./category/blog.html">blog</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="./agregar-disco-NetBSD-es.html" rel="bookmark"
         title="Permalink to Agregando un disco extra en NetBSD">Agregando un disco extra en NetBSD</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2011-06-29T01:57:00+02:00">
      Wed 29 June 2011
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="./author/francisco-valladolid.html">Francisco Valladolid</a>
    </address>
    <div class="category">
        Category: <a href="./category/blog.html">blog</a>
    </div>
    <div class="tags">
        Tags:
            <a href="./tag/scsi.html">scsi</a>
            <a href="./tag/netbsd.html">netbsd</a>
            <a href="./tag/unix.html">unix</a>
            <a href="./tag/bsd.html">bsd</a>
            <a href="./tag/linux.html">linux</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Tengo en casa un servidor corriendo NetBSD 5.1 stable en un disco SCSI
36gb conectado a una controladora SYMBIOS que soporta siete
dispositivos. Tengo necesidad de compilar pkgsrc/, asi que me decidi a
montar un disco extra solo para ese proposito, a continuacion detallo el
proceso.</p>
<pre class="literal-block">
$ dmesg | grep scsibus
scsibus0 at esiop0: 16 targets, 8 luns per target
scsibus0: waiting 2 seconds for devices to settle...
sd0 at scsibus0 target 1 lun 0: &lt;FUJITSU, MAP3367NP, 0106&gt; disk fixed
sd1 at scsibus0 target 2 lun 0: &lt;IBM, DDYS-T36950N, S96H&gt; disk fixed
</pre>
<p><a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?disklabel++NetBSD-current">disklabel(8)</a>
nos permite crear la etiqueta de nuestra particion en el disco nuevo.</p>
<pre class="literal-block">
$ disklabel -i -I sd1
</pre>
<pre class="literal-block">
$ sudo newfs /dev/rsd1e
/dev/rsd1e: 35003.6MB (71687340 sectors) block size 16384, fragment size 2048
        using 190 cylinder groups of 184.23MB, 11791 blks, 23296 inodes.
super-block backups (for fsck_ffs -b #) at:

$ sudo fsck -f /dev/rsd1e
$ sudo mkdir /usr/pkgsrc
$ vi /etc/fstab

/dev/sd1e               /usr/pkgsrc ffs rw,log          1 2

$ sudo mount -va
$ df -h
/dev/sd1e          34G        34M        32G   0% /usr/pkgsrc
</pre>
<p>La instalacion es simple y ahora tenemos un disco aunque de no gran
tamano, bien nos sirve para hacer compilacion de paquetes, sin
congestionar nuestro disco del sistema base. Algunas ocasiones
necesitamos limpiar el disco, llenar con ceros, para ello usamos:</p>
<pre class="literal-block">
# dd if=/dev/zero of=/dev/sd1 bs=8k
</pre>

  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>