<!DOCTYPE html>
<html lang="es">
<head>
          <title>BSDguy.org - Generando llaves SSH</title>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />




    <meta name="tags" content="openbsd" />
    <meta name="tags" content="zsh" />
    <meta name="tags" content="git" />
    <meta name="tags" content="shell" />
    <meta name="tags" content="ssh" />
    <meta name="tags" content="keys" />
    <meta name="tags" content="rsa" />
    <meta name="tags" content="ed_25519" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="./">BSDguy.org</a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li class="active"><a href="./category/blog.html">blog</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="./ssh-keys-es.html" rel="bookmark"
         title="Permalink to Generando llaves SSH">Generando llaves SSH</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2020-05-17T00:00:00+02:00">
      Sun 17 May 2020
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="./author/francisco-valladolid.html">Francisco Valladolid</a>
    </address>
    <div class="category">
        Category: <a href="./category/blog.html">blog</a>
    </div>
    <div class="tags">
        Tags:
            <a href="./tag/openbsd.html">openbsd</a>
            <a href="./tag/zsh.html">zsh</a>
            <a href="./tag/git.html">git</a>
            <a href="./tag/shell.html">shell</a>
            <a href="./tag/ssh.html">ssh</a>
            <a href="./tag/keys.html">keys</a>
            <a href="./tag/rsa.html">rsa</a>
            <a href="./tag/ed_25519.html">ed_25519</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Use el comando <a href="https://man.openbsd.org/ssh-keygen.1">ssh-heygen(1)</a> para crear un par de llaves usando el tipo ed25519 para incrementar la seguridad.</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span><span class="w">  </span><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">ed25519</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_ed25519</span><span class="w"> </span>
<span class="n">Generating</span><span class="w"> </span><span class="k">public</span><span class="o">/</span><span class="n">private</span><span class="w"> </span><span class="n">ed25519</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">pair</span><span class="p">.</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">save</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">userX</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_ed25519</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="n">Generating</span><span class="w"> </span><span class="k">public</span><span class="o">/</span><span class="n">private</span><span class="w"> </span><span class="n">ed25519</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">pair</span><span class="p">.</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">passphrase</span><span class="w"> </span><span class="p">(</span><span class="n">empty</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">passphrase</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="n">Enter</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">passphrase</span><span class="w"> </span><span class="nl">again</span><span class="p">:</span><span class="w"></span>
<span class="n">Your</span><span class="w"> </span><span class="n">identification</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_ed25519</span><span class="p">.</span><span class="w"></span>
<span class="n">Your</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_ed25519</span><span class="p">.</span><span class="n">pub</span><span class="p">.</span><span class="w"></span>
<span class="n">The</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">fingerprint</span><span class="w"> </span><span class="k">is</span><span class="err">:</span><span class="w"></span>
<span class="nl">SHA256</span><span class="p">:</span><span class="n">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="w"> </span><span class="n">comment</span><span class="w"></span>
<span class="n">The</span><span class="w"> </span><span class="k">key</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">randomart</span><span class="w"> </span><span class="nc">image</span><span class="w"> </span><span class="k">is</span><span class="err">:</span><span class="w"></span>
<span class="o">+--[</span><span class="n">ED25519 256</span><span class="o">]--+</span><span class="w"></span>
<span class="o">|</span><span class="w">       </span><span class="p">.</span><span class="n">o</span><span class="o">=</span><span class="err">@</span><span class="o">*=</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w">        </span><span class="n">oX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="o">=</span><span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w">        </span><span class="o">*</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">+</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w">     </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w">        </span><span class="n">S</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">+</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w">       </span><span class="o">*</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">o</span><span class="w">     </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">X</span><span class="p">.</span><span class="n">o</span><span class="p">.</span><span class="o">=</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w">       </span><span class="n">O</span><span class="w"> </span><span class="o">=+</span><span class="n">o</span><span class="w">     </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w">      </span><span class="p">.</span><span class="w"> </span><span class="n">E</span><span class="o">++++</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">+----[</span><span class="n">SHA256</span><span class="o">]-----+</span><span class="w"></span>
<span class="err">$</span><span class="w"></span>

<span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">Graba</span><span class="w"> </span><span class="n">la</span><span class="w"> </span><span class="n">llave</span><span class="w"> </span><span class="n">privada</span><span class="w"> </span><span class="n">usando</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="n">nuevo</span><span class="w"> </span><span class="n">formato</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">OpenSSH</span><span class="w">  </span>
<span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">indica</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="n">tipo</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">llave</span><span class="p">,</span><span class="w"> </span><span class="n">en</span><span class="w"> </span><span class="n">este</span><span class="w"> </span><span class="n">caso</span><span class="w"> </span><span class="n">ed25519</span><span class="p">.</span><span class="w"></span>
<span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="mi">100</span><span class="w">  </span><span class="n">especifica</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="n">numero</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="ss">&quot;rounds&quot;</span><span class="w"> </span><span class="n">KDF</span><span class="w"> </span><span class="p">(</span><span class="k">Key</span><span class="w"> </span><span class="n">derivation</span><span class="w"> </span><span class="k">function</span><span class="p">)</span><span class="w"></span>
<span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">especifica</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="n">del</span><span class="w"> </span><span class="n">archivo</span><span class="w"></span>
</code></pre></div>

<p><strong><em>Los siguientes comandos te permiten copiar el contenido de tu llave al clipboard para subirla a servidor o a Github/Gitlab.</em></strong></p>
<div class="highlight"><pre><span></span><code>en OSX
$ pbcopy &lt; ~/.ssh/id_ed25519.pub

en OpenBSD
$ xclip -selection clipboard ~/.ssh/id_ed25519.pub
</code></pre></div>

<p>A continuacion agregamos nuestra llave al <code>ssh-agent</code></p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">eval</span> <span class="sb">`</span>ssh-agent -s<span class="sb">`</span>
    $ ssh-add ~/.ssh/id_ed25519
</code></pre></div>

<p>Ahora nuestras llaves SSH estan usando el algoritmo ed25519 y se encuentran en el directorio ~/.ssh/.</p>
<p>Es posible, si el sistema operativo no soporta una nueva version de SSH generar llaves con el algoritmo RSA, usando:  -t rsa en el comando <a href="https://man.openbsd.org/ssh-keygen.1">ssh-heygen(1)</a>.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>